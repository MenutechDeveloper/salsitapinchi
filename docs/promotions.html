<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
   <script>
  window.restaurantId = 'bufalo';
</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>restaurantapp</title>
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/img/DiseÃ±o%20sin%20tÃ­tulo%20(8).png">
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/img/DiseÃ±o%20sin%20tÃ­tulo%20(8).png" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/img/DiseÃ±o%20sin%20tÃ­tulo%20(8).png">
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/img/DiseÃ±o%20sin%20tÃ­tulo%20(8).png" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/img/DiseÃ±o%20sin%20tÃ­tulo%20(8).png">
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/img/DiseÃ±o%20sin%20tÃ­tulo%20(8).png">
    <link rel="icon" type="image/png" sizes="500x500" href="./assets/img/mks%20(9).png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
    <link rel="manifest" href="./manifest.json" crossorigin="use-credentials">
    <link rel="stylesheet" href="./assets/css/app.css">
   
<script src="./instalarapp.js" defer></script>
</head>

<body class="no-scroll"><div class="app">
<div class="rasca-container">
<div class="rasca">





<!-- CUPÃ“N -->
<div class="scratch-card">
  <img id="premio-img" src="https://lasalsitapinchi.com/img/salsapremio.jpg" alt="Premio">
  <canvas id="scratch-canvas" width="300" height="300"></canvas>
</div>

<!-- MENSAJE -->
<div class="message-container" id="message-box">
  <p>ðŸ“¸ Take a screenshot of the coupon and message us to claim your prize.</p>
  <a href="https://m.me/lasalsitapinchi" target="_blank">Claim Your Scratch Prize</a>
</div>

<!-- Confetti y sonido -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<audio id="scratch-sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_6cbb84f553.mp3" preload="auto"></audio>

<script>
  const canvas = document.getElementById('scratch-canvas');
  const ctx = canvas.getContext('2d');
  const w = canvas.width;
  const h = canvas.height;

  const messageBox = document.getElementById('message-box');
  const scratchSound = document.getElementById('scratch-sound');

  let hasTriggeredPulse = false;
  let hasShownMessage = false;
  let isDrawing = false;
  let playSound = false;

  const coverImage = new Image();
  coverImage.crossOrigin = "anonymous";
  coverImage.src = 'https://lasalsitapinchi.com/img/rascaygana.jpg';

  coverImage.onload = () => {
    ctx.globalCompositeOperation = 'source-over';
    ctx.drawImage(coverImage, 0, 0, w, h);
    ctx.globalCompositeOperation = 'destination-out';
  };

  function getPointerPos(e) {
    const rect = canvas.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    return { x, y };
  }

  function emitDust(x, y) {
    // Crea pequeÃ±as partÃ­culas grises como "polvo" saliendo
    const count = 6;
    for (let i = 0; i < count; i++) {
      const size = Math.random() * 2 + 1;
      const offsetX = (Math.random() - 0.5) * 40;
      const offsetY = (Math.random() - 0.5) * 40;
      const div = document.createElement('div');
      div.style.position = 'absolute';
      div.style.left = `${x + offsetX}px`;
      div.style.top = `${y + offsetY}px`;
      div.style.width = `${size}px`;
      div.style.height = `${size}px`;
      div.style.background = '#888';
      div.style.borderRadius = '50%';
      div.style.opacity = '0.6';
      div.style.pointerEvents = 'none';
      div.style.zIndex = '10';
      div.style.transition = 'opacity 0.8s ease-out';
      document.body.appendChild(div);
      setTimeout(() => {
        div.style.opacity = '0';
        setTimeout(() => div.remove(), 1000);
      }, 30);
    }
  }

  function draw(e) {
    if (!isDrawing) return;

    const pos = getPointerPos(e);
    const x = pos.x;
    const y = pos.y;

    ctx.beginPath();
    ctx.arc(x, y, 20, 0, Math.PI * 2);
    ctx.fill();

    // ðŸŽµ Sonido de rascar
    if (playSound) {
      if (scratchSound.paused) {
        scratchSound.play();
      } else {
        scratchSound.currentTime = 0;
      }
    }

    // âœ¨ Polvo gris fuera de zona de rascado
    const globalPos = canvas.getBoundingClientRect();
    emitDust(globalPos.left + x, globalPos.top + y);

    checkScratchPercent();
  }

  function checkScratchPercent() {
    const imageData = ctx.getImageData(0, 0, w, h);
    const total = imageData.data.length / 4;
    let transparent = 0;

    for (let i = 0; i < imageData.data.length; i += 4) {
      if (imageData.data[i + 3] === 0) {
        transparent++;
      }
    }

    const percent = transparent / total;

    if (percent > 0.7 && !hasTriggeredPulse) {
      document.getElementById('premio-img').classList.add('pulse');
      confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } }); // ðŸŽ‰
      hasTriggeredPulse = true;
    }

    if (percent > 0.7 && !hasShownMessage) {
      messageBox.classList.add('show');
      hasShownMessage = true;
    }
  }

  function startDraw(e) {
    isDrawing = true;
    playSound = true;
    draw(e);
  }

  function endDraw() {
    isDrawing = false;
    playSound = false;
    scratchSound.pause();
    scratchSound.currentTime = 0;
  }

  canvas.addEventListener('mousedown', startDraw);
  canvas.addEventListener('mousemove', draw);
  document.addEventListener('mouseup', endDraw);

  canvas.addEventListener('touchstart', startDraw, { passive: false });
  canvas.addEventListener('touchmove', (e) => {
    e.preventDefault();
    draw(e);
  }, { passive: false });
  document.addEventListener('touchend', endDraw);
</script>




</div></div>



    

    <div class="bottom-bar">
  <a href="https://lasalsitapinchi.com/" class="bar-icon logo-icon">
    <img src="https://lasalsitapinchi.com/logo.jpg" alt="Logo">
  </a>
  <a href="javascript:history.back()" class="bar-icon">
    <img src="https://menutechdeveloper.github.io/bddImg/assets/iconos/back.png" alt="Back">
  </a>
</div>
    <script src="./assets/js/portapapeles.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/filtro.js"></script>
    
    <script src="./assets/js/spash.js"></script>
       <script src="./script.js"></script>
        <script src="./assets/js/seguridad.js"></script>
</div>

</body>


</html>






